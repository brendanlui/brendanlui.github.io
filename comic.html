<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
	<link id="stylecall1" rel="stylesheet" href="/css/academic_style.css" />
	<link id="stylecall2" rel="stylesheet" href="/css/logo_dadiu.css" />
	<link id="stylecall3" rel="stylesheet" href="/css/inputButton.css" />
	<link rel="icon"
	  type="image/png"
	  href="/img/d01.png">
	  <script type="text/javascript" src="/js/jquery-1.10.2.min.js"></script>
	  <script type="text/javascript" src="/js/jquery.scrollTo.js"></script>

</head>

<title>Dadiu | Comic</title>

<body onload="restart()">
	<div id="head">
		<div id="logo">
			<img src="/img/dadiu.png" alt="dai01" class="logo_dadiu">
		</div>
	</div>

	<link rel="stylesheet" href="/css/responsive_bar_style.css">
	<div class="topnav" id="myTopnav">
	  <a href="/">Previous page</a>
	</div>

	<!--TODO-->

	<div id="myModalHeader" class="modal">
	</div>
	<div id="myModalPage" class="modal">
	</div>
	<div id="myModalContent" class="modal">
	</div>
	<div id="myModalFooter" class="modal">
	</div>

	<script>
	var comicId = "touch";
	var set = 1;

	function restart(){
		var temp = "";
		for(i = 1; i <= 26; i++){
				temp += '<a class="list" id="'+comicId+i+'" onclick="chooseSet('+comicId+', '+i+', 1)"></a>'
		}
		document.getElementById("myModalHeader").innerHTML = temp;
	}

	function chooseSet(comicId, num, curPage){
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function(){
			if(xmlhttp.status == 200 && xmlhttp.readyState == 4){
					var string = [];
					var txt = xmlhttp.responseText;

					var str = txt.split('.jpg" style=\'display:none;\'></div><div id="ss-toolbar">')[0];
					var arr = str.split('/');
					var page = arr[arr.length-1];

					var selectBox = "";
					selectBox = 'Page : <select id="mySelectPage" onchange="changePage()">';
					for(i = 1; i <= page; i++){
						selectBox += '<option value="'+i+'">'+i+'</option>';
					}
					selectBox += "</select>";
					document.getElementById("myModalPage").innerHTML += selectBox;
					document.getElementById("myModalContent").innerHTML = '<img src="./comic/'+comicId+'/img/'+num+"_"+curPage+'">';

					if(curPage == page){
						document.getElementById("myModalFooter").innerHTML = "";
					}else{
						document.getElementById("myModalFooter").innerHTML = '<button type="submit" class="nextPage" id="nextPage" onclick="nextPage("'+comicId+'", '+set+', '+(curPage+1)+')"></button>';
					}
					
					set = num;
			}
		};
		xmlhttp.open("GET","./comic/"+comicId+"/html/" + num + ".html",true);
		xmlhttp.send();
	}

	function nextPage(curPage){
			document.getElementById("myModalContent").innerHTML = '<img src="./comic/'+comicId+'/img/'+set+"_"+curPage+'">';
	}

	function changePage(){
		  var curPage = document.getElementById("mySelectPage").value;
		  document.getElementById("myModalContent").innerHTML = '<img src="./comic/'+comicId+'/img/'+set+"_"+curPage+'">';
	}
	</script>

	<ul id="foot">
		</br>
		<li>Â© Copyright 2020. All Rights Reserved.</li>
	</ul></br>
</body>
</html>
